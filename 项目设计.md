# 📘 项目需求设计文档：LLM_Timer - 番茄钟智能任务管理系统（高级版）

## 🧠 一、项目概述

**项目名称**：LLM_Timer  
**项目目标**：打造一个结合番茄工作法、任务管理、LLM 智能排期与自然语言交互的时间管理平台，帮助用户提升专注力与时间利用率。

---

## 🎯 二、核心功能模块

### 1. ✅ 任务管理模块

| 功能       | 描述                                   |
| ---------- | -------------------------------------- |
| 添加任务   | 输入任务标题、预估时间与优先级添加任务 |
| 删除任务   | 从任务列表中移除任务                   |
| 标记完成   | 勾选任务完成状态                       |
| 筛选任务   | 支持“全部 / 已完成 / 未完成”筛选       |
| 本地持久化 | 使用 `localStorage` 存储任务数据       |
| 时间段编辑 | 可手动设置 `开始时间 / 结束时间`       |
| 拖拽排序   | 使用拖拽方式对任务顺序进行调整（可选） |

---

### 2. ⏱ 番茄钟模块（Pomodoro）

| 功能       | 描述                     |
| ---------- | ------------------------ |
| 倒计时     | 默认25分钟，可启动/暂停  |
| 声音提醒   | 倒计时结束播放提示音     |
| 重置按钮   | 回到默认时间             |
| 与任务联动 | 可将倒计时与某个任务绑定 |

---

### 3. 🤖 智能任务安排模块（LLM Agent）

| 功能           | 描述                                     |
| -------------- | ---------------------------------------- |
| 一键排期       | 点击“智能安排”后，Agent 自动生成时间计划 |
| 自动计算时间段 | 避免任务冲突，按优先级+时长合理分配时间  |
| 多日排期       | 可处理跨度多天的任务排期（如项目计划）   |
| 同步更新视图   | 自动刷新任务时间，按 startTime 排序      |
| Agent 标识     | 标记 `fromAgent: true`，便于识别         |

---

### 4. 📆 日历视图集成（FullCalendar）

| 功能             | 描述                                     |
| ---------------- | ---------------------------------------- |
| 日历嵌入         | 使用 FullCalendar 将任务渲染为可视日历   |
| 可视化排期       | 显示每日任务区块、支持点击/拖动修改时间  |
| 日/周/月视图切换 | 自由切换不同粒度的时间管理视图           |
| 动态交互         | 拖动日历块可更新任务 startTime / endTime |

---

### 5. 💬 自然语言任务输入（LLM Parsing）

| 功能         | 描述                                         |
| ------------ | -------------------------------------------- |
| 自然语言识别 | 用户输入如“我明天上午安排阅读1小时”          |
| 自动解析     | 解析时间（如“明天上午”）+内容（“阅读”）+时长 |
| 自动添加任务 | 转换为任务对象并插入列表                     |
| 背后支持     | 使用 LLM Prompt 工具链进行语义理解           |

---

## 🧩 三、任务数据结构（Task Object）

```ts
interface Task {
  id: number
  title: string
  estimatedMinutes: number       // 预估时长（分钟）
  priority: '高' | '中' | '低'
  isCompleted: boolean
  startTime?: string             // YYYY-MM-DD HH:mm
  endTime?: string
  fromAgent?: boolean            // 是否由智能Agent安排
  isMultiDay?: boolean           // 是否为跨天任务
}
```

## 🧠 四、智能排期 Prompt（示例）

```
你是一个 AI 任务调度助手。以下是用户的任务列表，请合理安排它们的开始与结束时间。支持跨天任务，避免时间冲突，并尽可能优先安排高优先级任务。

开始时间：2025-06-19 09:00

任务清单：
- title: "撰写项目文档"，estimatedMinutes: 120，priority: 高
- title: "锻炼身体"，estimatedMinutes: 60，priority: 中
- title: "阅读书籍"，estimatedMinutes: 90，priority: 中
- title: "娱乐时间"，estimatedMinutes: 30，priority: 低

请返回格式如下：

[
  { title: "撰写项目文档", startTime: "2025-06-19 09:00", endTime: "2025-06-19 11:00" },
  { title: "阅读书籍", startTime: "2025-06-19 13:30", endTime: "2025-06-19 15:00" },
  ...
]
```

------

## 🔧 五、技术选型

| 模块         | 技术方案                                      |
| ------------ | --------------------------------------------- |
| 前端框架     | Vue 3 + Composition API                       |
| UI 组件库    | Element Plus 或 Tailwind CSS                  |
| 状态管理     | Composition API，后期可接入 Pinia             |
| 本地存储     | 浏览器 `localStorage`                         |
| 日历集成     | `@fullcalendar/vue3` + dayGrid/timeGrid 插件  |
| LLM 调用     | 使用Deepseek API   |
| 自然语言处理 | 自定义 Prompt + 后端解析结构体（task schema） |
| 时间格式处理 | `dayjs` 或 `date-fns`                         |

------

## 🧪 六、用户交互流程示例

1. 用户输入：“我明天下午安排写总结2小时”
2. 系统识别自然语言内容 → 自动添加为结构化任务
3. 点击“智能安排” → Agent 调用，跨多日排期任务
4. 任务更新：出现在任务列表与日历视图中
5. 用户点击某个任务 → 启动番茄钟专注模式